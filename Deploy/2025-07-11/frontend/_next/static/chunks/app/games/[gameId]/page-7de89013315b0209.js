(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{1223:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>el});var t=a(5155),r=a(2115),n=a(5695),i=a(7168),c=a(8482),l=a(8145),o=a(9663),d=a(9026),m=a(7550),x=a(4835),u=a(7580),h=a(646),p=a(4357),b=a(1366),j=a(488),g=a(6516),f=a(5657),N=a(7951),v=a(5339),y=a(5690),w=a(6559),k=a(3580),A=a(6874),R=a.n(A);function C(e){let{game:s,currentPlayerId:a,onGameAction:A}=e,{toast:C}=(0,k.dj)(),S=(0,n.useRouter)(),[T,E]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),B=a===s.hostId,F=Object.keys(s.players).length,I=F>=2,Z=(0,r.useMemo)(()=>"".concat(window.location.origin,"/join/").concat(s.id),[s.id]),P=(0,r.useMemo)(()=>Object.values(s.players||{}).sort((e,s)=>e.isHost&&!s.isHost?-1:!e.isHost&&s.isHost?1:(e.joinedAt||0)-(s.joinedAt||0)),[s.players]),H=async()=>{try{let e=s.code||s.id;await navigator.clipboard.writeText(e),E(!0),C({title:"Copied!",description:"Game code copied to clipboard",duration:1500}),setTimeout(()=>E(!1),2e3)}catch(e){C({title:"Error",description:"Failed to copy code",variant:"destructive"})}},L=async()=>{B&&await A("startGame")},O=async()=>{try{G(!0),B?(await A("deleteGame"),C({title:"Game deleted",description:"You've deleted the game as the host"})):(await A("leaveGame",{playerId:a}),C({title:"Left game",description:"You've left the game successfully"})),S.push("/dashboard")}catch(e){console.error("Error exiting game:",e),C({title:"Error",description:"Failed to exit the game. Please try again.",variant:"destructive"})}finally{G(!1)}},z=e=>{switch(e){case"red":return"bg-red-500/20 text-red-700 border-red-500/30";case"blue":return"bg-blue-500/20 text-blue-700 border-blue-500/30";default:return"bg-secondary text-secondary-foreground"}},$=e=>{if(s.teamConfigs&&Array.isArray(s.teamConfigs)){let a=s.teamConfigs.find(s=>s.id===e);if(a&&a.name)return a.name}return e.charAt(0).toUpperCase()+e.slice(1)};return(0,t.jsxs)("div",{className:"container max-w-md mx-auto p-4 space-y-6",children:[(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsx)("div",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(R(),{href:"/dashboard",children:(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent-hover transition-casino",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-casino-primary",children:s.title||"Spades Game"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Hosted by ",s.hostName]})]}),(0,t.jsxs)(w.Lt,{children:[(0,t.jsx)(w.tv,{asChild:!0,children:(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-destructive/10",children:(0,t.jsx)(x.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(w.EO,{children:[(0,t.jsxs)(w.wd,{children:[(0,t.jsx)(w.r7,{children:B?"Delete Game":"Leave Game"}),(0,t.jsx)(w.$v,{children:B?"Are you sure you want to delete this game? All players will be disconnected.":"Are you sure you want to leave this game?"})]}),(0,t.jsxs)(w.ck,{children:[(0,t.jsx)(w.Zr,{children:"Cancel"}),(0,t.jsx)(w.Rx,{onClick:O,disabled:W,children:B?"Delete Game":"Leave Game"})]})]})]})]})})}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-casino-primary"}),"Game Lobby"]}),(0,t.jsx)(c.BT,{children:"Share this code with friends to join"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-secondary/20 rounded-lg border-casino-subtle border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Game Code"}),(0,t.jsx)("p",{className:"text-3xl font-mono font-bold text-casino-primary tracking-wider",children:s.code||s.id})]}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:H,className:"transition-casino transform-casino-hover",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-1 text-green-500"}),"Copied"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Share with friends"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{let e="Join my Spades game! Game code: ".concat(s.id," or use this link: ").concat(Z),a="https://wa.me/?text=".concat(encodeURIComponent(e));window.open(a,"_blank")},className:"flex-1 transition-casino transform-casino-hover",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"WhatsApp"]}),(0,t.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{let e="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(Z));window.open(e,"_blank")},className:"flex-1 transition-casino transform-casino-hover",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Facebook"]}),(0,t.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{navigator.share?navigator.share({title:"Join my Spades game!",text:"Join my Spades game! Use game code: ".concat(s.id),url:Z}).catch(e=>{console.error("Error sharing:",e),H()}):H()},className:"flex-1 transition-casino transform-casino-hover",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"More"]})]})]})]})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:["Players (",F,"/4)"]}),(0,t.jsx)(l.E,{variant:"outline",className:"border-casino-subtle text-casino-primary",children:"Lobby"})]}),(0,t.jsx)(c.BT,{children:F<4?"Waiting for ".concat(4-F," more players..."):"All players ready!"})]}),(0,t.jsx)(c.Wu,{className:"space-y-3",children:P.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary/10 rounded-lg border-casino-subtle border hover:bg-secondary/20 transition-casino",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.eu,{className:"h-10 w-10 border-2 border-casino-subtle",children:[(0,t.jsx)(o.BK,{src:e.photoURL||"",alt:e.name}),(0,t.jsx)(o.q5,{className:"bg-casino-accent text-accent-foreground font-semibold",children:(null===(s=e.name)||void 0===s?void 0:s.charAt(0))||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-background ".concat(e.isComputer?"bg-blue-500":"bg-green-500")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:e.name}),e.isComputer&&(0,t.jsx)(f.A,{className:"h-4 w-4 text-blue-500"}),e.isHost&&(0,t.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.isComputer?"Computer Player":"Human Player"})]})]}),(0,t.jsx)(l.E,{variant:"outline",className:"".concat(z(e.team)," font-medium"),children:e.team?"Team ".concat($(e.team)):"No Team"})]},e.id)})})]}),B?(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[I?(0,t.jsxs)(d.Fc,{className:"border-green-500/30 bg-green-500/10",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(d.XL,{className:"text-green-700",children:"Ready to Start!"}),(0,t.jsx)(d.TN,{className:"text-green-600",children:"All players are ready. You can start the game now."})]}):(0,t.jsxs)(d.Fc,{className:"border-yellow-500/30 bg-yellow-500/10",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)(d.XL,{className:"text-yellow-700",children:"Waiting for Players"}),(0,t.jsxs)(d.TN,{className:"text-yellow-600",children:["Need at least ",2-F," more players to start."]})]}),(0,t.jsxs)(i.$,{onClick:L,disabled:!I,className:"w-full bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino transform-casino-hover",size:"lg",children:[(0,t.jsx)(y.A,{className:"h-5 w-5 mr-2"}),"Start Game"]})]})})}):(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsxs)(c.Wu,{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"animate-pulse mb-4",children:(0,t.jsx)(N.A,{className:"h-8 w-8 text-yellow-500 mx-auto"})}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Waiting for ",(0,t.jsx)("span",{className:"font-medium text-casino-primary",children:s.hostName})," to start the game..."]})]})})]})}var S=a(2714),T=a(5784),E=a(5196);function W(e){let{gameData:s,user:a,isHost:o}=e;(0,n.useRouter)();let{toast:d}=(0,k.dj)(),[x,h]=(0,r.useState)(!1),b=Object.keys(s.players||{}).length;return(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle transition-casino",children:(0,t.jsx)("div",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(R(),{href:"/dashboard",children:(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-accent-hover transition-casino transform-casino-hover",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-casino-primary",children:s.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"font-medium",children:["Game Code: ",s.id]}),(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-accent-hover transition-casino transform-casino-hover",onClick:()=>{navigator.clipboard.writeText(s.id),h(!0),d({title:"Game Code Copied",description:"Share this code with your friends to join",duration:2e3}),setTimeout(()=>h(!1),2e3)},children:x?(0,t.jsx)(E.A,{className:"h-3 w-3 text-green-500"}):(0,t.jsx)(p.A,{className:"h-3 w-3"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(s.status){case"lobby":return(0,t.jsx)(l.E,{variant:"outline",className:"border-casino-subtle text-casino-primary",children:"Lobby"});case"bidding":return(0,t.jsxs)(l.E,{className:"bg-casino-accent text-accent-foreground",children:["Bidding • Round ",s.currentRound]});case"playing":return(0,t.jsxs)(l.E,{className:"bg-casino-primary text-primary-foreground",children:["Playing • Round ",s.currentRound]});case"scoring":return(0,t.jsxs)(l.E,{className:"bg-casino-accent text-accent-foreground",children:["Scoring • Round ",s.currentRound]});case"completed":return(0,t.jsx)(l.E,{variant:"secondary",className:"bg-secondary/60",children:"Completed"});default:return(0,t.jsxs)(l.E,{className:"bg-casino-primary text-primary-foreground",children:["Round ",s.currentRound,"/",s.totalRounds]})}})(),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground bg-secondary/30 px-2 py-1 rounded-full",children:[(0,t.jsx)(u.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{className:"font-medium",children:[b,"/4"]})]})]})]})})})}var G=a(6785),B=a(8186),F=a(2657),I=(a(8749),a(4186));function Z(e){var s,a;let{game:n,currentPlayerId:m,onGameAction:x}=e,{toast:p}=(0,k.dj)(),[b,j]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),w=m?n.players[m]:null,A=null===(s=n.rounds)||void 0===s?void 0:s[n.currentRound-1],R=w&&(null==A?void 0:A.bids)&&m&&void 0!==A.bids[m],C=m===n.hostId,E={id:m||"",name:(null==w?void 0:w.name)||"Player",email:"player@spadescore.com"},Z={...n,title:n.title||"Spades Game",hostName:n.hostName||"Host"},P=async()=>{if(!b||!m)return;let e=parseInt(b),s=(null==A?void 0:A.tricksThisRound)||n.currentRound;if(isNaN(e)||e<0){p({title:"Invalid Bid",description:"Please enter a valid number for your bid",variant:"destructive"});return}if(e>s){p({title:"Bid Too High",description:"For round ".concat(n.currentRound,", maximum bid allowed is ").concat(s),variant:"destructive"});return}v(!0);try{await x("submitBid",{bid:e}),p({title:"Bid Submitted",description:"You bid ".concat(e," tricks")}),j("")}catch(e){console.error("Error submitting bid:",e),p({title:"Error",description:"Failed to submit bid",variant:"destructive"})}finally{v(!1)}},H=async()=>{if(C)try{v(!0),console.log("Starting trick tracking for round ".concat(n.currentRound)),await x("startTrickTracking"),p({title:"Round Started",description:"Players can now track their tricks"})}catch(e){console.error("Error starting trick tracking:",e),p({title:"Error",description:"Failed to start trick tracking",variant:"destructive"})}finally{v(!1)}},L=Object.keys(n.players).every(e=>(null==A?void 0:A.bids)&&void 0!==A.bids[e]),O=e=>{switch(e){case"red":return"bg-red-500/20 text-red-700 border-red-500/30";case"blue":return"bg-blue-500/20 text-blue-700 border-blue-500/30";default:return"bg-secondary text-secondary-foreground"}};return(0,t.jsxs)("div",{className:"container max-w-md mx-auto p-4 space-y-6",children:[(0,t.jsx)(W,{gameData:Z,user:E,isHost:C}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-casino-accent"}),"Round ",n.currentRound," - Bidding"]}),(0,t.jsx)(c.BT,{children:"Submit your bid for this round"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"text-center p-4 bg-casino-accent/10 rounded-lg border border-casino-accent/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5 text-casino-accent"}),(0,t.jsx)("span",{className:"text-sm font-medium text-casino-accent",children:"Tricks Available"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-casino-primary",children:(null==A?void 0:A.tricksThisRound)||n.currentRound})]})})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsx)(c.aR,{className:"pb-3",children:(0,t.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"h-5 w-5 text-casino-primary"}),(0,t.jsx)("span",{children:"Your Bid"})]}),(0,t.jsxs)(l.E,{variant:"outline",className:"border-casino-subtle text-casino-primary",children:["Visible"," Bidding"]})]})}),(0,t.jsx)(c.Wu,{className:"space-y-4",children:R?(0,t.jsxs)(d.Fc,{className:"border-green-500/30 bg-green-500/10",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(d.XL,{className:"text-green-700",children:"Bid Submitted!"}),(0,t.jsxs)(d.TN,{className:"text-green-600",children:["You bid ",(0,t.jsx)("span",{className:"font-bold",children:m&&(null==A?void 0:null===(a=A.bids)||void 0===a?void 0:a[m])})," tricks. Waiting for other players..."]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"bid",className:"text-sm font-medium",children:"Select Your Bid"}),(0,t.jsxs)(T.l6,{value:b,onValueChange:j,children:[(0,t.jsx)(T.bq,{className:"bg-secondary/20 border-casino-subtle transition-casino",children:(0,t.jsx)(T.yv,{placeholder:"Bid 0-".concat((null==A?void 0:A.tricksThisRound)||n.currentRound," tricks")})}),(0,t.jsx)(T.gC,{children:(()=>{let e=(null==A?void 0:A.tricksThisRound)||n.currentRound,s=[];for(let a=0;a<=e;a++)s.push(a.toString());return s})().map(e=>(0,t.jsxs)(T.eb,{value:e,children:[e," ",1===parseInt(e)?"trick":"tricks"]},e))})]})]}),(0,t.jsx)(i.$,{onClick:P,disabled:!b||g,className:"w-full bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino transform-casino-hover",size:"lg",children:g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full"}),"Submitting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.A,{className:"h-4 w-4 mr-2"}),"Submit Bid"]})})]})})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-casino-primary"}),"Player Bids"]}),(0,t.jsx)(c.BT,{children:"Bid values are visible to all players"})]}),(0,t.jsx)(c.Wu,{className:"space-y-3",children:Object.entries(n.players).map(e=>{var s,a,r,i;let[c,d]=e,m=(null==A?void 0:A.bids)&&void 0!==A.bids[c],x=null==A?void 0:null===(s=A.bids)||void 0===s?void 0:s[c];return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary/10 rounded-lg border-casino-subtle border hover:bg-secondary/20 transition-casino",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.eu,{className:"h-10 w-10 border-2 border-casino-subtle",children:[(0,t.jsx)(o.BK,{src:"",alt:d.name}),(0,t.jsx)(o.q5,{className:"bg-casino-accent text-accent-foreground font-semibold",children:(null===(a=d.name)||void 0===a?void 0:a.charAt(0))||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-background ".concat(d.isComputer?"bg-blue-500":"bg-green-500")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:d.name}),d.isComputer&&(0,t.jsx)(f.A,{className:"h-4 w-4 text-blue-500"}),c===n.hostId&&(0,t.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)(l.E,{variant:"outline",className:"".concat(O(d.team)," text-xs"),children:["Team ",(null===(r=d.team)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(i=d.team)||void 0===i?void 0:i.slice(1))]}),m&&(0,t.jsxs)(l.E,{variant:"secondary",className:"text-xs bg-casino-accent/20 text-casino-accent",children:[x," tricks"]})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:m?(0,t.jsx)(h.A,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(I.A,{className:"h-5 w-5 text-gray-400 animate-pulse"})})]},c)})})]}),L&&(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)(d.Fc,{className:"border-blue-500/30 bg-blue-500/10",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(d.XL,{className:"text-blue-700",children:"All Bids Submitted!"}),(0,t.jsx)(d.TN,{className:"text-blue-600",children:C?"All players have submitted their bids. You can start trick tracking now.":"All bids are in! Waiting for the host to start trick tracking..."})]}),C&&(0,t.jsx)(i.$,{onClick:H,disabled:g,className:"w-full mt-4 bg-casino-accent hover:bg-accent/90 text-accent-foreground transition-casino transform-casino-hover",size:"lg",children:g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-accent-foreground border-t-transparent rounded-full"}),"Starting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Start Trick Tracking"]})})]})})]})}var P=a(9145),H=a(6740);function L(e){var s,a;let{game:n,currentPlayerId:m,onGameAction:x}=e,{toast:p}=(0,k.dj)(),[b,j]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),y=m?n.players[m]:null,w=null===(s=n.rounds)||void 0===s?void 0:s[n.currentRound-1],A=y&&(null==w?void 0:w.tricks)&&m&&void 0!==w.tricks[m],R=m===n.hostId,C={id:m||"",name:(null==y?void 0:y.name)||"Player",email:"player@spadescore.com"},E={...n,title:n.title||"Spades Game",hostName:n.hostName||"Host"},F=async()=>{if(!b||!m)return;let e=parseInt(b);if(isNaN(e)||e<0){p({title:"Invalid Tricks",description:"Please enter a valid number for your tricks",variant:"destructive"});return}v(!0);try{await x("submitTricks",{tricks:e}),p({title:"Tricks Submitted",description:"You won ".concat(e," tricks")}),j("")}catch(e){console.error("Error submitting tricks:",e),"individual_limit"===e.validation?p({title:"Invalid Tricks",description:"Tricks must be between 0 and ".concat(n.currentRound),variant:"destructive"}):p({title:"Error",description:e.message||"Failed to submit tricks",variant:"destructive"})}finally{v(!1)}},Z=async()=>{if(R)try{v(!0),console.log("Completing round ".concat(n.currentRound)),await x("completeRound"),p({title:"Round Completed",description:"Scores have been calculated"})}catch(e){console.error("Error completing round:",e),p({title:"Error",description:"Failed to complete round",variant:"destructive"})}finally{v(!1)}},L=Object.keys(n.players).every(e=>(null==w?void 0:w.tricks)&&void 0!==w.tricks[e]),O=e=>{switch(e){case"red":return"bg-red-500/20 text-red-700 border-red-500/30";case"blue":return"bg-blue-500/20 text-blue-700 border-blue-500/30";default:return"bg-secondary text-secondary-foreground"}},z=(e,s)=>0===e?s:s===e?10*e:s>e?10*e+(s-e):10*s-(e-s)*10,$=e=>{var s;return(null==w?void 0:null===(s=w.bids)||void 0===s?void 0:s[e])||0};return(0,t.jsxs)("div",{className:"container max-w-md mx-auto p-4 space-y-6",children:[(0,t.jsx)(W,{gameData:E,user:C,isHost:R}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5 text-casino-accent"}),"Round ",n.currentRound," - Trick Tracking"]}),(0,t.jsx)(c.BT,{children:"Enter how many tricks you actually won"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-casino-accent/10 rounded-lg border border-casino-accent/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-casino-accent"}),(0,t.jsx)("span",{className:"text-sm font-medium text-casino-accent",children:"Total Tricks"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-casino-primary",children:n.currentRound})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-secondary/10 rounded-lg border border-casino-subtle",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(I.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Available"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-casino-primary",children:n.currentRound}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Total for this round"})]})]}),(null==w?void 0:w.tricks)&&Object.keys(w.tricks).length>0&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-secondary/10 rounded-lg border border-casino-subtle",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(P.A,{className:"h-4 w-4 text-casino-accent"}),(0,t.jsx)("span",{className:"text-sm font-medium text-casino-accent",children:"Tricks Claimed"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["Total claimed: ",Object.values(w.tricks).reduce((e,s)=>e+s,0)," / ",n.currentRound]}),Object.values(w.tricks).reduce((e,s)=>e+s,0)!==n.currentRound&&(0,t.jsx)("p",{className:"text-blue-600 font-medium",children:"ℹ️ Host will review and approve the final distribution"})]})]})]})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsx)(c.aR,{className:"pb-3",children:(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-casino-primary"}),"Your Bid"]})}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"text-center p-4 bg-secondary/20 rounded-lg border border-casino-subtle",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-casino-primary",children:[m?$(m):0," tricks"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Your target for this round"})]})})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsx)(c.aR,{className:"pb-3",children:(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"h-5 w-5 text-casino-primary"}),"Tricks Won"]})}),(0,t.jsx)(c.Wu,{className:"space-y-4",children:A?(0,t.jsxs)(d.Fc,{className:"border-green-500/30 bg-green-500/10",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(d.XL,{className:"text-green-700",children:"Tricks Submitted!"}),(0,t.jsxs)(d.TN,{className:"text-green-600",children:["You won ",(0,t.jsx)("span",{className:"font-bold",children:m&&(null==w?void 0:null===(a=w.tricks)||void 0===a?void 0:a[m])})," tricks. Waiting for other players..."]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"tricks",className:"text-sm font-medium",children:"How many tricks did you win?"}),(0,t.jsxs)(T.l6,{value:b,onValueChange:j,children:[(0,t.jsx)(T.bq,{className:"bg-secondary/20 border-casino-subtle transition-casino",children:(0,t.jsx)(T.yv,{placeholder:"Select tricks won"})}),(0,t.jsx)(T.gC,{children:(()=>{let e=(null==w?void 0:w.tricksThisRound)||n.currentRound,s=[];for(let a=0;a<=e;a++)s.push(a.toString());return s})().map(e=>(0,t.jsxs)(T.eb,{value:e,children:[e," ",1===parseInt(e)?"trick":"tricks"]},e))})]})]}),b&&m&&(0,t.jsxs)("div",{className:"p-3 bg-casino-accent/10 rounded-lg border border-casino-accent/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(H.A,{className:"h-4 w-4 text-casino-accent"}),(0,t.jsx)("span",{className:"text-sm font-medium text-casino-accent",children:"Score Preview"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["Bid: ",$(m)," | Won: ",b]}),(0,t.jsxs)("p",{className:"font-bold text-casino-primary",children:["Score: ",z($(m),parseInt(b))," points"]})]})]}),(0,t.jsx)(i.$,{onClick:F,disabled:!b||g,className:"w-full bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino transform-casino-hover",size:"lg",children:g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full"}),"Submitting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Submit Tricks"]})})]})})]}),(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{className:"pb-3",children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-casino-primary"}),"Player Progress"]}),(0,t.jsx)(c.BT,{children:"Bid vs Tricks comparison"})]}),(0,t.jsx)(c.Wu,{className:"space-y-3",children:Object.entries(n.players).map(e=>{var s,a,r,i;let[c,d]=e,m=(null==w?void 0:w.tricks)&&void 0!==w.tricks[c],x=(null==w?void 0:null===(s=w.tricks)||void 0===s?void 0:s[c])||0,u=$(c),p=m?z(u,x):0,b=m&&x===u;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary/10 rounded-lg border-casino-subtle border hover:bg-secondary/20 transition-casino",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.eu,{className:"h-10 w-10 border-2 border-casino-subtle",children:[(0,t.jsx)(o.BK,{src:"",alt:d.name}),(0,t.jsx)(o.q5,{className:"bg-casino-accent text-accent-foreground font-semibold",children:(null===(a=d.name)||void 0===a?void 0:a.charAt(0))||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-background ".concat(d.isComputer?"bg-blue-500":"bg-green-500")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:d.name}),d.isComputer&&(0,t.jsx)(f.A,{className:"h-4 w-4 text-blue-500"}),c===n.hostId&&(0,t.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)(l.E,{variant:"outline",className:"".concat(O(d.team)," text-xs"),children:["Team ",(null===(r=d.team)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(i=d.team)||void 0===i?void 0:i.slice(1))]}),m&&(0,t.jsx)(l.E,{variant:b?"default":"secondary",className:"text-xs",children:b?"Contract Made!":"Contract Missed"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Bid: ",u," | Won: ",m?x:"?"," | Score: ",m?p:"?"]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:m?(0,t.jsx)(h.A,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(I.A,{className:"h-5 w-5 text-gray-400 animate-pulse"})})]},c)})})]}),L&&(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)(d.Fc,{className:"border-blue-500/30 bg-blue-500/10",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(d.XL,{className:"text-blue-700",children:"All Tricks Submitted!"}),(0,t.jsx)(d.TN,{className:"text-blue-600",children:R?"All players have submitted their tricks. You can complete the round now.":"All tricks are in! Waiting for the host to complete the round..."})]}),R&&(0,t.jsx)(i.$,{onClick:Z,disabled:g,className:"w-full mt-4 bg-casino-accent hover:bg-accent/90 text-accent-foreground transition-casino transform-casino-hover",size:"lg",children:g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-accent-foreground border-t-transparent rounded-full"}),"Completing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Complete Round"]})})]})})]})}var O=a(9934),z=a(3999);let $=O.bL,U=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(O.B8,{ref:s,className:(0,z.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});U.displayName=O.B8.displayName;let V=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(O.l9,{ref:s,className:(0,z.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});V.displayName=O.l9.displayName;let Y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(O.UC,{ref:s,className:(0,z.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});Y.displayName=O.UC.displayName;var D=a(2713),_=a(2138);function q(e){var s,a;let{game:r,currentPlayerId:n,onGameAction:o}=e,d=n===r.hostId,m=r.rounds[r.currentRound-1],x=r.currentRound>=r.totalRounds,u=async()=>{d&&await o("nextRound")},h={};Object.keys(r.players).forEach(e=>{let s=0;for(let a=1;a<=r.currentRound;a++)r.roundScores&&r.roundScores[a]&&r.roundScores[a][e]&&(s+=r.roundScores[a][e]);h[e]=s});let p=Object.entries(r.players).map(e=>{var s;let[a,t]=e;return{playerId:a,...t,roundScore:(null==m?void 0:null===(s=m.scores)||void 0===s?void 0:s[a])||0,totalScore:h[a]||0}}).sort((e,s)=>(s.totalScore||0)-(e.totalScore||0)),b={};Object.entries(r.players).forEach(e=>{let[s,a]=e;a.team&&(b[a.team]||(b[a.team]=0),b[a.team]+=h[s]||0)});let j=Object.keys(b),g=e=>{if(r.teamConfigs&&Array.isArray(r.teamConfigs)){let s=r.teamConfigs.find(s=>s.id===e);if(s&&s.name)return s.name}return e.charAt(0).toUpperCase()+e.slice(1)},f=(null===(s=r.teamConfig)||void 0===s?void 0:s.gameMode)==="individual"||0===j.length,v=[],y={};for(let e=1;e<=r.currentRound;e++)r.roundScores&&r.roundScores[e]&&(v.push(e),y[e]=r.roundScores[e]);let w={};return Object.keys(r.players).forEach(e=>{w[e]={};let s=0;v.forEach(a=>{var t;let r=(null===(t=y[a])||void 0===t?void 0:t[e])||0;s+=r,w[e][a]=s})}),(0,t.jsx)("div",{className:"container max-w-md mx-auto p-4 space-y-6",children:(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:x?"Final Results":"Game Results"}),(0,t.jsx)(l.E,{variant:x?"default":"secondary",children:x?"Complete":"Round ".concat(r.currentRound)})]}),(0,t.jsx)(c.BT,{children:x?"Game complete!":"Round ".concat(r.currentRound," of ").concat(r.totalRounds)})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)($,{defaultValue:"current",className:"w-full",children:[(0,t.jsxs)(U,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(V,{value:"current",className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),"Current Round"]}),(0,t.jsxs)(V,{value:"overall",className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),"Overall Scores"]})]}),(0,t.jsxs)(Y,{value:"current",className:"space-y-6",children:[!f&&j.length>1&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Team Standings"}),(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(".concat(Math.min(j.length,3),", 1fr)")},children:j.map((e,s)=>{let a=Object.values(r.players).filter(s=>s.team===e).map(e=>e.name).join(", ");return(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg border ".concat(0===s?"bg-red-50 border-red-200 text-red-800":1===s?"bg-blue-50 border-blue-200 text-blue-800":2===s?"bg-green-50 border-green-200 text-green-800":3===s?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-purple-50 border-purple-200 text-purple-800"),children:[(0,t.jsx)("p",{className:"text-sm font-medium capitalize",children:g(e)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:a}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:b[e]||0})]},e)})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Individual Scores"}),(0,t.jsx)("div",{className:"space-y-2",children:p.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background rounded border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[0===s&&x&&(0,t.jsx)(B.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-muted-foreground",children:["#",s+1]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),e.playerId===r.hostId&&(0,t.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.team&&(0,t.jsx)(l.E,{variant:"outline",className:"text-xs capitalize",children:g(e.team)}),!x&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["+",e.roundScore," this round"]})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xl font-bold",children:e.totalScore||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"total"})]})]},e.playerId))})]}),m&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium",children:["Round ",r.currentRound," Details"]}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(r.players).map(e=>{var s,a,r;let[n,i]=e,c=(null===(s=m.bids)||void 0===s?void 0:s[n])||0,o=(null===(a=m.tricks)||void 0===a?void 0:a[n])||0,d=(null===(r=m.scores)||void 0===r?void 0:r[n])||0,x=c===o;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:i.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:["Bid: ",c]}),(0,t.jsxs)("span",{children:["Won: ",o]}),(0,t.jsx)(l.E,{variant:x?"default":"secondary",children:x?"Made":"Failed"}),(0,t.jsxs)("span",{className:"font-medium",children:[d>0?"+":"",d]})]})]},n)})})]})]}),(0,t.jsx)(Y,{value:"overall",className:"space-y-6",children:v.length>0?(0,t.jsxs)(t.Fragment,{children:[!f&&j.length>1&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Team Standings"}),(0,t.jsx)("div",{className:"space-y-2",children:j.map(e=>({name:e,score:b[e]||0,members:Object.values(r.players).filter(s=>s.team===e).map(e=>e.name).join(", ")})).sort((e,s)=>s.score-e.score).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background rounded border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-lg font-bold text-muted-foreground",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:g(e.name)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.members})]})]}),(0,t.jsx)("span",{className:"text-xl font-bold",children:e.score})]},e.name))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Round-by-Round Scores"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-2",children:"Player"}),v.map(e=>(0,t.jsxs)("th",{className:"text-center p-2",children:["R",e]},e)),(0,t.jsx)("th",{className:"text-center p-2 font-bold",children:"Total"})]})}),(0,t.jsx)("tbody",{children:p.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"p-2 font-medium",children:e.name}),v.map(s=>{var a;let r=(null===(a=y[s])||void 0===a?void 0:a[e.playerId])||0;return(0,t.jsx)("td",{className:"text-center p-2",children:(0,t.jsxs)("span",{className:r>0?"text-green-600":r<0?"text-red-600":"text-muted-foreground",children:[r>0?"+":"",r]})},s)}),(0,t.jsx)("td",{className:"text-center p-2 font-bold bg-muted/20",children:e.totalScore||0})]},e.playerId))})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Cumulative Scores"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-2",children:"Player"}),v.map(e=>(0,t.jsxs)("th",{className:"text-center p-2",children:["After R",e]},e))]})}),(0,t.jsx)("tbody",{children:p.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"p-2 font-medium",children:e.name}),v.map(s=>{var a;let r=(null===(a=w[e.playerId])||void 0===a?void 0:a[s])||0;return(0,t.jsx)("td",{className:"text-center p-2",children:(0,t.jsx)("span",{className:r>0?"text-green-600":r<0?"text-red-600":"text-muted-foreground",children:r})},s)})]},e.playerId))})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(D.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,t.jsx)("p",{className:"font-medium",children:"No completed rounds yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Overall scores will appear after the first round is completed"})]})})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[d&&!x&&(0,t.jsxs)(i.$,{onClick:u,className:"w-full bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Next Round"]}),x&&(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)(B.A,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-lg font-bold text-green-800",children:j.length>1?"".concat(g(j.reduce((e,s)=>b[s]>b[e]?s:e,j[0]))," Wins!"):"".concat(null===(a=p[0])||void 0===a?void 0:a.name," Wins!")}),(0,t.jsxs)("p",{className:"text-sm text-green-600",children:["Game complete after ",r.currentRound," rounds"]})]}),!d&&!x&&(0,t.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,t.jsxs)("p",{children:["Waiting for ",r.hostName," to start the next round..."]})})]})]})]})})}var J=a(9840),M=a(9852),X=a(1243),K=a(4940);function Q(e){let{game:s,currentPlayerId:a,isHost:n,onEditTricks:o,onApproveTricks:d}=e,[m,x]=(0,r.useState)(null),[p,b]=(0,r.useState)(""),[j,g]=(0,r.useState)(!1),f="trick_review"===s.status,v=s.rounds[s.currentRound-1];if(!v)return null;let y=Object.values(v.tricks||{}).reduce((e,s)=>e+(s||0),0),w=s.currentRound,A=y===w,R=(e,s)=>{n&&(x(e),b(s.toString()))},C=async e=>{let a=parseInt(p);if(isNaN(a)||a<0||a>w){(0,k.oR)({title:"Invalid Tricks",description:"Tricks must be between 0 and ".concat(w),variant:"destructive"});return}try{await o(e,a),x(null),(0,k.oR)({title:"Tricks Updated",description:"Updated ".concat(s.players[e].name,"'s tricks to ").concat(a)})}catch(e){(0,k.oR)({title:"Error",description:e.message||"Failed to update tricks",variant:"destructive"})}},S=()=>{x(null),b("")},T=async()=>{if(!A){(0,k.oR)({title:"Cannot Approve",description:"Total tricks must equal exactly ".concat(w),variant:"destructive"});return}g(!0);try{await d(),(0,k.oR)({title:"Tricks Approved",description:"Round completed successfully!"})}catch(e){(0,k.oR)({title:"Error",description:e.message||"Failed to approve tricks",variant:"destructive"})}finally{g(!1)}};return(0,t.jsx)(J.lG,{open:f,onOpenChange:()=>{},children:(0,t.jsxs)(J.Cf,{className:"max-w-md mx-auto w-[95vw]",suppressHydrationWarning:!0,children:[(0,t.jsx)(J.c7,{suppressHydrationWarning:!0,children:(0,t.jsxs)(J.L3,{className:"flex items-center gap-2",suppressHydrationWarning:!0,children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Trick Review & Approval"]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(c.Zp,{suppressHydrationWarning:!0,children:[(0,t.jsx)(c.aR,{className:"pb-3",suppressHydrationWarning:!0,children:(0,t.jsxs)(c.ZB,{className:"text-lg flex items-center justify-between",suppressHydrationWarning:!0,children:[(0,t.jsxs)("span",{children:["Round ",s.currentRound," Summary"]}),(0,t.jsxs)(l.E,{variant:A?"default":"destructive",className:"text-sm",suppressHydrationWarning:!0,children:["Total: ",y,"/",w]})]})}),(0,t.jsxs)(c.Wu,{suppressHydrationWarning:!0,children:[!A&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 mb-4",children:[(0,t.jsx)(X.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Total tricks must equal ",w,". Current total: ",y]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:n?"Review and edit player tricks as needed. Total must equal the round number before approval.":"Waiting for host to review and approve the tricks."})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(s.players).map(e=>{var r,o;let[d,x]=e,u=(null===(r=v.bids)||void 0===r?void 0:r[d])||0,j=(null===(o=v.tricks)||void 0===o?void 0:o[d])||0,g=m===d,f=u===j;return(0,t.jsx)(c.Zp,{className:"hover:bg-secondary/20 transition-colors",suppressHydrationWarning:!0,children:(0,t.jsx)(c.Wu,{className:"p-4",suppressHydrationWarning:!0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:x.name}),d===s.hostId&&(0,t.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"}),d===a&&(0,t.jsx)(l.E,{variant:"outline",className:"text-xs",suppressHydrationWarning:!0,children:"You"})]}),(0,t.jsx)(l.E,{variant:f?"default":"secondary",className:"text-xs",suppressHydrationWarning:!0,children:f?"Contract Made":"Contract Missed"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"B:"}),(0,t.jsx)("span",{className:"font-bold ml-1",children:u})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"W:"}),g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.p,{type:"number",min:"0",max:w.toString(),value:p,onChange:e=>b(e.target.value),className:"w-16 h-8 text-center",onKeyDown:e=>{"Enter"===e.key?C(d):"Escape"===e.key&&S()},autoFocus:!0,suppressHydrationWarning:!0}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>C(d),className:"h-8 px-2",suppressHydrationWarning:!0,children:(0,t.jsx)(h.A,{className:"h-3 w-3"})}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:S,className:"h-8 px-2",suppressHydrationWarning:!0,children:"\xd7"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-bold min-w-[20px] text-center",children:j}),n&&(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>R(d,j),className:"h-6 w-6 p-0",suppressHydrationWarning:!0,children:(0,t.jsx)(K.A,{className:"h-3 w-3"})})]})]})]})]})})},d)})}),n&&(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsx)(i.$,{onClick:T,disabled:!A||j,className:"bg-green-600 hover:bg-green-700 text-white px-8",size:"lg",suppressHydrationWarning:!0,children:j?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Approving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Approve & Continue"]})})}),!n&&(0,t.jsx)("div",{className:"text-center p-4 bg-secondary/20 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for host to review and approve the trick distribution..."})})]})]})})}var ee=a(1886),es=a(6517),ea=a(1154),et=a(4449),er=a(6193),en=a(3904),ei=a(7340);function ec(e){let{gameId:s}=e,a=(0,n.useRouter)(),{toast:o}=(0,k.dj)(),[m,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(!0),[j,g]=(0,r.useState)(null),[f,N]=(0,r.useState)(null),[y,A]=(0,r.useState)("connecting"),[R,S]=(0,r.useState)(0),[T,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{console.log("\uD83C\uDFAE GameScreen useEffect - gameId:",s);let e=ee.sZ.getPlayerSession();if(console.log("\uD83D\uDCE6 Session from storage:",e),!e){console.error("❌ No session found, redirecting to dashboard"),o({title:"Session Expired",description:"Please join a game first",variant:"destructive"}),a.push("/dashboard");return}if(e.gameId!==s){console.error("❌ Game ID mismatch:",{sessionGameId:e.gameId,routeGameId:s}),o({title:"Game Mismatch",description:"This isn't the game you joined",variant:"destructive"}),a.push("/dashboard");return}console.log("✅ Session valid, setting player ID:",e.playerId),N(e.playerId);let t=new ee.$j;return t.onGameUpdate(e=>{h(e),b(!1),g(null),A("connected"),S(0)}),t.onError(e=>{console.error("Game polling error:",e),g("Connection lost"),A("disconnected"),S(e=>e+1)}),t.startPolling(s,"lobby"),()=>{t.stopPolling()}},[s,a,o]);let W=async(e,a)=>{if(!f){o({title:"Error",description:"You are not properly connected to the game",variant:"destructive"});return}try{switch(A("connecting"),e){case"startGame":await ee.V8.startGame(s,f);break;case"submitBid":await ee.V8.submitBid(s,f,a.bid);break;case"submitTricks":await ee.V8.submitTricks(s,f,a.tricks);break;case"startTrickTracking":await ee.V8.startTrickTracking(s,f);break;case"completeRound":await ee.V8.completeRound(s,f);break;case"nextRound":await ee.V8.nextRound(s,f);break;case"leaveGame":await ee.V8.leaveGame(s,f);break;case"deleteGame":await ee.V8.deleteGame(s,f);break;case"editPlayerTricks":await ee.V8.editPlayerTricks(s,f,a.targetPlayerId,a.newTricks);break;case"approveTricks":await ee.V8.approveTricks(s,f);break;default:throw Error("Unknown action: ".concat(e))}A("connected")}catch(e){console.error("Game action error:",e),A("disconnected"),o({title:"Action Failed",description:"Unable to perform action. Check your connection.",variant:"destructive"})}},G=async()=>{b(!0),g(null),A("connecting");try{let e=await ee.V8.getGame(s);h(e.game),b(!1),A("connected")}catch(e){g("Failed to reconnect"),A("disconnected"),b(!1)}},F=async()=>{if(f){E(!0);try{await ee.V8.leaveGame(s,f),ee.sZ.clearPlayerSession(),o({title:"Left Game",description:"You have successfully left the game"}),a.push("/dashboard")}catch(e){console.error("Error leaving game:",e),o({title:"Error",description:"Failed to leave game properly, but you'll be taken to dashboard",variant:"destructive"}),ee.sZ.clearPlayerSession(),a.push("/dashboard")}finally{E(!1)}}},I=async()=>{if(f&&m){E(!0);try{await ee.V8.cancelGame(s,f),ee.sZ.clearPlayerSession(),o({title:"Game Called Off",description:"The game has been cancelled and all players have been notified"}),a.push("/dashboard")}catch(e){console.error("Error calling off game:",e),o({title:"Error",description:"Failed to cancel game, but you'll be taken to dashboard",variant:"destructive"}),ee.sZ.clearPlayerSession(),a.push("/dashboard")}finally{E(!1)}}},P=async(e,s)=>{await W("editPlayerTricks",{targetPlayerId:e,newTricks:s})},H=async()=>{await W("approveTricks")},O=()=>{switch(y){case"connected":return(0,t.jsx)(es.A,{className:"h-4 w-4 text-green-600"});case"connecting":return(0,t.jsx)(ea.A,{className:"h-4 w-4 text-yellow-600 animate-spin"});case"disconnected":return(0,t.jsx)(et.A,{className:"h-4 w-4 text-red-600"})}};if(p)return(0,t.jsx)("div",{className:"container max-w-md mx-auto p-4 min-h-screen flex items-center justify-center",children:(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle w-full",children:(0,t.jsxs)(c.Wu,{className:"p-8 text-center space-y-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-casino-accent/20 border-t-casino-accent mx-auto"}),(0,t.jsx)(er.A,{className:"h-6 w-6 text-casino-accent absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-casino-primary",children:"Loading Game"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:R>0?"Reconnecting... (Attempt ".concat(R,")"):"Connecting to game..."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[O(),(0,t.jsx)("span",{className:"text-xs text-muted-foreground capitalize",children:y})]})]})})});if(j)return(0,t.jsx)("div",{className:"container max-w-md mx-auto p-4 min-h-screen flex items-center justify-center",children:(0,t.jsxs)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle w-full",children:[(0,t.jsxs)(c.aR,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(v.A,{className:"h-8 w-8 text-red-600"})}),(0,t.jsx)(c.ZB,{className:"text-casino-primary",children:"Connection Problem"}),(0,t.jsxs)(c.BT,{children:[j,R>3&&" - Multiple connection attempts failed"]})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)(d.Fc,{className:"border-red-500/30 bg-red-500/10",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(d.XL,{className:"text-red-700",children:"Unable to Connect"}),(0,t.jsx)(d.TN,{className:"text-red-600",children:"Check your internet connection and try again."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)(i.$,{onClick:G,variant:"outline",className:"border-casino-subtle hover:bg-accent-hover transition-casino",children:[(0,t.jsx)(en.A,{className:"h-4 w-4 mr-2"}),"Retry"]}),(0,t.jsxs)(i.$,{onClick:()=>a.push("/dashboard"),className:"bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino",children:[(0,t.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Dashboard"]})]})]})]})});if(!m)return(0,t.jsx)("div",{className:"container max-w-md mx-auto p-4 min-h-screen flex items-center justify-center",children:(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle w-full",children:(0,t.jsxs)(c.Wu,{className:"p-8 text-center space-y-4",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-yellow-500/10 rounded-full flex items-center justify-center",children:(0,t.jsx)(v.A,{className:"h-8 w-8 text-yellow-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-casino-primary",children:"Game Not Found"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This game may have ended or been deleted."})]}),(0,t.jsxs)(i.$,{onClick:()=>a.push("/dashboard"),className:"bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino",children:[(0,t.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})})});let z=m.state||m.status,$=(e=>{switch(e){case"lobby":return{icon:(0,t.jsx)(u.A,{className:"h-4 w-4"}),label:"Waiting for Players",color:"bg-blue-500/20 text-blue-700 border-blue-500/30"};case"bidding":return{icon:(0,t.jsx)(er.A,{className:"h-4 w-4"}),label:"Bidding Phase",color:"bg-casino-accent/20 text-casino-accent border-casino-accent/30"};case"playing":return{icon:(0,t.jsx)(B.A,{className:"h-4 w-4"}),label:"Playing Round",color:"bg-green-500/20 text-green-700 border-green-500/30"};case"trick_review":return{icon:(0,t.jsx)(B.A,{className:"h-4 w-4"}),label:"Reviewing Tricks",color:"bg-orange-500/20 text-orange-700 border-orange-500/30"};case"scoring":return{icon:(0,t.jsx)(B.A,{className:"h-4 w-4"}),label:"Round Complete",color:"bg-purple-500/20 text-purple-700 border-purple-500/30"};case"completed":return{icon:(0,t.jsx)(B.A,{className:"h-4 w-4"}),label:"Game Complete",color:"bg-yellow-500/20 text-yellow-700 border-yellow-500/30"};default:return{icon:(0,t.jsx)(v.A,{className:"h-4 w-4"}),label:"Unknown State",color:"bg-secondary text-secondary-foreground"}}})(z),U="connected"!==y&&(0,t.jsx)("div",{className:"container max-w-md mx-auto px-4 pb-2",children:(0,t.jsxs)(d.Fc,{className:"border-".concat("connecting"===y?"yellow":"red","-500/30 bg-").concat("connecting"===y?"yellow":"red","-500/10"),children:[O(),(0,t.jsx)(d.XL,{className:"text-".concat("connecting"===y?"yellow":"red","-700"),children:"connecting"===y?"Reconnecting...":"Connection Lost"}),(0,t.jsx)(d.TN,{className:"text-".concat("connecting"===y?"yellow":"red","-600"),children:"connecting"===y?"Syncing with other players...":"Some features may not work properly."})]})}),V=(0,t.jsx)("div",{className:"container max-w-md mx-auto px-4 pb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-casino-surface shadow-casino-card border-casino-subtle rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[$.icon,(0,t.jsx)("span",{className:"font-medium text-casino-primary",children:$.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.E,{variant:"outline",className:$.color,children:["Round ",m.currentRound]}),O(),(0,t.jsxs)(w.Lt,{children:[(0,t.jsx)(w.tv,{asChild:!0,children:(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-500/10 hover:text-red-600 transition-casino",disabled:T,children:(0,t.jsx)(x.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(w.EO,{className:"bg-casino-surface border-casino-subtle",children:[(0,t.jsxs)(w.wd,{children:[(0,t.jsxs)(w.r7,{className:"text-casino-primary flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),m.hostId===f?"Host Options":"Leave Game"]}),(0,t.jsx)(w.$v,{className:"text-muted-foreground",children:m.hostId===f?(0,t.jsx)(t.Fragment,{children:"As the game host, you can either leave the game (others continue playing) or call off the entire game for everyone."}):(0,t.jsx)(t.Fragment,{children:"Are you sure you want to leave this game? Other players will be notified of your departure."})})]}),(0,t.jsxs)(w.ck,{className:m.hostId===f?"flex-col gap-2":"",children:[(0,t.jsx)(w.Zr,{className:"border-casino-subtle hover:bg-accent-hover",children:"Cancel"}),m.hostId===f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Rx,{onClick:F,className:"bg-orange-600 hover:bg-orange-700 text-white",disabled:T,children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Leaving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Just Leave (Others Continue)"]})}),(0,t.jsx)(w.Rx,{onClick:I,className:"bg-red-600 hover:bg-red-700 text-white",disabled:T,children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Calling Off..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Call Off Game (End for Everyone)"]})})]}):(0,t.jsx)(w.Rx,{onClick:F,className:"bg-red-600 hover:bg-red-700 text-white",disabled:T,children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Leaving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Leave Game"]})})]})]})]})]})]})}),Y=(()=>{switch(z){case"lobby":return(0,t.jsx)(C,{game:m,currentPlayerId:f,onGameAction:W});case"bidding":return(0,t.jsx)(Z,{game:m,currentPlayerId:f,onGameAction:W});case"playing":case"trick_review":return(0,t.jsx)(L,{game:m,currentPlayerId:f,onGameAction:W});case"scoring":case"completed":return(0,t.jsx)(q,{game:m,currentPlayerId:f,onGameAction:W});default:return(0,t.jsx)("div",{className:"container max-w-md mx-auto p-4",children:(0,t.jsx)(c.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle",children:(0,t.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(v.A,{className:"h-8 w-8 text-yellow-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-casino-primary mb-2",children:"Unknown Game State"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Game state: ",z]}),(0,t.jsxs)(i.$,{onClick:()=>a.push("/dashboard"),className:"bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino",children:[(0,t.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})})})}})();return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[U,V,(0,t.jsx)("div",{className:"transition-all duration-300 ease-in-out",children:Y}),(0,t.jsx)(Q,{game:m,currentPlayerId:f,isHost:m.hostId===f,onEditTricks:P,onApproveTricks:H})]})}function el(){let e=(0,n.useParams)().gameId;return(0,t.jsx)(ec,{gameId:e})}},2610:(e,s,a)=>{Promise.resolve().then(a.bind(a,1223))},5784:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>b,gC:()=>p,l6:()=>d,yv:()=>m});var t=a(5155),r=a(2115),n=a(3323),i=a(6474),c=a(7863),l=a(5196),o=a(3999);let d=n.bL;n.YJ;let m=n.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...c}=e;return(0,t.jsxs)(n.l9,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[r,(0,t.jsx)(n.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})});u.displayName=n.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,position:i="popper",...c}=e;return(0,t.jsx)(n.ZL,{children:(0,t.jsxs)(n.UC,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...c,children:[(0,t.jsx)(u,{}),(0,t.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let b=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(n.q7,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.VF,{children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})}),(0,t.jsx)(n.p4,{children:r})]})});b.displayName=n.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},6559:(e,s,a)=>{"use strict";a.d(s,{$v:()=>b,EO:()=>x,Lt:()=>l,Rx:()=>j,Zr:()=>g,ck:()=>h,r7:()=>p,tv:()=>o,wd:()=>u});var t=a(5155),r=a(2115),n=a(7649),i=a(3999),c=a(7168);let l=n.bL,o=n.l9,d=n.ZL,m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});m.displayName=n.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(n.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});x.displayName=n.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};u.displayName="AlertDialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="AlertDialogFooter";let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",a),...r})});p.displayName=n.hE.displayName;let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});b.displayName=n.VY.displayName;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.rc,{ref:s,className:(0,i.cn)((0,c.r)(),a),...r})});j.displayName=n.rc.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.ZD,{ref:s,className:(0,i.cn)((0,c.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});g.displayName=n.ZD.displayName},8145:(e,s,a)=>{"use strict";a.d(s,{E:()=>c});var t=a(5155);a(2115);var r=a(2085),n=a(3999);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),s),suppressHydrationWarning:!0,...r})}},9026:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>l,TN:()=>d,XL:()=>o});var t=a(5155),r=a(2115),n=a(2085),i=a(3999);let c=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,s)=>{let{className:a,variant:r,...n}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(c({variant:r}),a),...n})});l.displayName="Alert";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});o.displayName="AlertTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},9663:(e,s,a)=>{"use strict";a.d(s,{BK:()=>l,eu:()=>c,q5:()=>o});var t=a(5155),r=a(2115),n=a(1293),i=a(3999);let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});c.displayName=n.bL.displayName;let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...r})});l.displayName=n._V.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});o.displayName=n.H4.displayName},9840:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>u,L3:()=>h,c7:()=>x,lG:()=>l,rr:()=>p});var t=a(5155),r=a(2115),n=a(8762),i=a(4416),c=a(3999);let l=n.bL;n.l9;let o=n.ZL;n.bm;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.hJ,{ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});d.displayName=n.hJ.displayName;let m=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(n.UC,{ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,t.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),suppressHydrationWarning:!0,...a})};x.displayName="DialogHeader";let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),suppressHydrationWarning:!0,...a})};u.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.hE,{ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=n.hE.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.VY,{ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=n.VY.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[455,874,953,521,384,275,863,413,441,684,358],()=>s(2610)),_N_E=e.O()}]);