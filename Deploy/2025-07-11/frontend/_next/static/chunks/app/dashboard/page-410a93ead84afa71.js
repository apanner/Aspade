(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{423:(e,t,s)=>{"use strict";s.d(t,{Dashboard:()=>M});var r=s(5155),a=s(2115),n=s(6874),l=s.n(n),i=s(5695),o=s(7168),d=s(9663),c=s(8145),u=s(1154),m=s(6193),x=s(9946);let h=(0,x.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var f=s(4835);let p=(0,x.A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var g=s(7580);let v=(0,x.A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var b=s(8186),y=s(8482),j=s(3999),N=s(5690),w=s(2657),A=s(7951);function k(e){let{game:t}=e,s=Object.keys(t.players||{}).length,a=t.totalRounds>0?Math.round(t.currentRound/t.totalRounds*100):0,n="in_progress"===t.status||t.currentRound>0,i="lobby"===t.status||0===t.currentRound,u=s>=4,{redTeam:x,blueTeam:h}=(()=>{let e=Object.values(t.players||{});return{redTeam:e.filter(e=>"red"===e.team),blueTeam:e.filter(e=>"blue"===e.team)}})(),f=i&&!u?{text:"Join Game",icon:(0,r.jsx)(g.A,{className:"h-4 w-4"}),variant:"default"}:n?{text:"Continue",icon:(0,r.jsx)(N.A,{className:"h-4 w-4"}),variant:"default"}:{text:"View Game",icon:(0,r.jsx)(w.A,{className:"h-4 w-4"}),variant:"outline"};return(0,r.jsxs)(y.Zp,{className:"bg-casino-surface shadow-casino-card border-casino-subtle hover:shadow-casino-gaming transition-casino hover:-translate-y-0.5",children:[(0,r.jsx)(y.aR,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 text-casino-accent"}),(0,r.jsx)(y.ZB,{className:"text-base text-casino-primary",children:t.title||"Spades Game"})]}),(0,r.jsxs)(y.BT,{className:"text-xs",children:["Hosted by ",(0,r.jsx)("span",{className:"font-medium text-casino-primary",children:t.hostName})," • ",(0,j.m)(t.createdAt)," ago"]})]}),i?(0,r.jsx)(c.E,{variant:"outline",className:"border-casino-subtle text-casino-primary",children:"Lobby"}):n?(0,r.jsx)(c.E,{className:"bg-casino-accent text-accent-foreground",children:"In Progress"}):(0,r.jsx)(c.E,{variant:"secondary",className:"bg-secondary/60",children:"Completed"})]})}),(0,r.jsxs)(y.Wu,{className:"pb-3 space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:i?"Waiting for players":n?"Round ".concat(t.currentRound,"/").concat(t.totalRounds):"Completed"}),(0,r.jsxs)("span",{className:"text-casino-primary font-medium",children:[s,"/",4," players"]})]}),n&&(0,r.jsx)("div",{className:"w-full bg-secondary/30 h-1.5 rounded-full",children:(0,r.jsx)("div",{className:"bg-casino-accent h-1.5 rounded-full transition-all duration-500",style:{width:"".concat(a,"%")}})})]}),s>0&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Red Team"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[x.slice(0,2).map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(d.eu,{className:"h-6 w-6 border border-casino-subtle",children:[(0,r.jsx)(d.BK,{src:"",alt:e.name}),(0,r.jsx)(d.q5,{className:"text-xs bg-casino-accent text-accent-foreground",children:(null===(s=e.name)||void 0===s?void 0:s.charAt(0))||"?"})]}),e.isComputer&&(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-blue-500 rounded-full border border-background"})]}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-xs font-medium truncate",children:e.name}),e.id===t.hostId&&(0,r.jsx)(A.A,{className:"h-3 w-3 text-yellow-500 flex-shrink-0"})]})})]},e.id)}),0===x.length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground py-1",children:"Waiting for players..."})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Blue Team"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[h.slice(0,2).map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(d.eu,{className:"h-6 w-6 border border-casino-subtle",children:[(0,r.jsx)(d.BK,{src:"",alt:e.name}),(0,r.jsx)(d.q5,{className:"text-xs bg-casino-accent text-accent-foreground",children:(null===(s=e.name)||void 0===s?void 0:s.charAt(0))||"?"})]}),e.isComputer&&(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-blue-500 rounded-full border border-background"})]}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-xs font-medium truncate",children:e.name}),e.id===t.hostId&&(0,r.jsx)(A.A,{className:"h-3 w-3 text-yellow-500 flex-shrink-0"})]})})]},e.id)}),0===h.length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground py-1",children:"Waiting for players..."})]})]})]}),n&&t.scores&&(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-casino-subtle",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(b.A,{className:"h-3 w-3 text-casino-accent"}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Scores"})]}),(0,r.jsxs)("div",{className:"flex gap-3 text-xs",children:[(0,r.jsxs)("span",{className:"text-red-600 font-medium",children:["Red: ",Object.values(t.scores).reduce((e,t)=>e+t,0)||0]}),(0,r.jsxs)("span",{className:"text-blue-600 font-medium",children:["Blue: ",Object.values(t.scores).reduce((e,t)=>e+t,0)||0]})]})]})]}),(0,r.jsx)(y.wL,{className:"pt-3",children:(0,r.jsx)(l(),{href:"/games/".concat(t.id),className:"w-full",children:(0,r.jsxs)(o.$,{variant:f.variant,className:"w-full bg-casino-primary hover:bg-primary/90 text-primary-foreground transition-casino transform-casino-hover",size:"sm",children:[(0,r.jsx)("span",{children:f.text}),f.icon&&(0,r.jsx)("span",{className:"ml-2",children:f.icon})]})})})]})}var S=s(4861),E=s(3580);function M(){let{user:e,loading:t,signOut:s}=(0,S.A)(),n=(0,i.useRouter)(),{toast:x}=(0,E.dj)(),[y,j]=(0,a.useState)([]),[N,w]=(0,a.useState)(!0),[A]=(0,a.useState)("Express.js");(0,a.useEffect)(()=>{if(console.log("\uD83C\uDFE0 Dashboard useEffect - loading:",t,"user:",e),!t&&!e){console.log("❌ No user found, redirecting to login"),n.push("/");return}e&&(console.log("✅ User authenticated, loading dashboard for:",e.name),(async()=>{try{j([])}catch(e){console.error("Error fetching games:",e),x({title:"❌ Error",description:"Failed to load your active games",variant:"destructive"})}finally{w(!1)}})())},[e,t,n,x]);let M=async()=>{try{s(),n.push("/")}catch(e){console.error("Error signing out:",e),x({title:"❌ Error",description:"Failed to sign out",variant:"destructive"})}};return t||!e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,r.jsx)(u.A,{className:"animate-spin w-8 h-8"}),(0,r.jsx)("span",{className:"text-lg",children:"Loading..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-start justify-center",children:(0,r.jsxs)("div",{className:"container max-w-md mx-auto p-4 space-y-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 p-4 rounded-lg shadow-2xl border border-slate-600/50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)("div",{className:"bg-amber-500/20 rounded-full p-2.5 border-2 border-amber-500/30",children:(0,r.jsx)(m.A,{className:"h-10 w-10 text-amber-400"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"A-SPADE Online"}),(0,r.jsx)("p",{className:"text-xs text-amber-400/90 font-medium",children:"MOBILE SPADES EXPERIENCE"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-slate-800/50 p-3 rounded-lg shadow-xl border border-slate-700/50 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(d.eu,{className:"border-2 border-amber-500/30",children:[(0,r.jsx)(d.BK,{src:"",alt:e.name}),(0,r.jsx)(d.q5,{className:"bg-amber-500/20 text-amber-400 font-bold",children:e.name.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-white",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,r.jsx)(h,{className:"h-3 w-3 text-amber-400"}),(0,r.jsx)("span",{className:"text-[10px] text-amber-400",children:A})]})]})]}),(0,r.jsx)(o.$,{variant:"ghost",size:"icon",onClick:M,className:"hover:bg-red-500/10 text-slate-400 hover:text-red-400",children:(0,r.jsx)(f.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-3 mb-4",children:[(0,r.jsx)(l(),{href:"/create-game",className:"no-underline flex-1",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white text-sm font-medium py-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 shadow-xl hover:scale-105",children:[(0,r.jsx)(p,{className:"h-4 w-4"}),"Create Game"]})}),(0,r.jsx)(l(),{href:"/join-game",className:"no-underline flex-1",children:(0,r.jsxs)("div",{className:"bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 text-sm font-medium py-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 shadow-xl hover:scale-105 border border-slate-600/50",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Join Game"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[(0,r.jsx)(l(),{href:"/history",passHref:!0,className:"no-underline",children:(0,r.jsxs)("div",{className:"bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 rounded-lg p-4 h-24 flex flex-col items-center justify-center gap-1.5 shadow-xl transition-all duration-300 hover:shadow-2xl hover:-translate-y-0.5 backdrop-blur-sm",children:[(0,r.jsx)(v,{className:"h-6 w-6 text-amber-400"}),(0,r.jsx)("span",{className:"font-semibold text-sm text-white",children:"History"})]})}),(0,r.jsx)(l(),{href:"/leaderboard",passHref:!0,className:"no-underline",children:(0,r.jsxs)("div",{className:"bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 rounded-lg p-4 h-24 flex flex-col items-center justify-center gap-1.5 shadow-xl transition-all duration-300 hover:shadow-2xl hover:-translate-y-0.5 backdrop-blur-sm",children:[(0,r.jsx)(b.A,{className:"h-6 w-6 text-amber-400"}),(0,r.jsx)("span",{className:"font-semibold text-sm text-white",children:"Leaderboard"})]})})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-amber-500/10 to-orange-500/10 px-4 py-2.5 rounded-t-lg border border-slate-700/50 flex items-center justify-between backdrop-blur-sm",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-1.5 text-white",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 text-amber-400"}),"Active Games"]}),y.length>0&&(0,r.jsxs)(c.E,{variant:"secondary",className:"bg-amber-500/20 text-amber-400 hover:bg-amber-500/30 text-xs px-2",children:[y.length," ",1===y.length?"Game":"Games"]})]}),(0,r.jsx)("div",{className:"border-x border-b border-slate-700/50 rounded-b-lg overflow-hidden shadow-xl backdrop-blur-sm",children:N?(0,r.jsx)("div",{className:"flex items-center justify-center py-8 bg-slate-800/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,r.jsx)(u.A,{className:"animate-spin h-6 w-6"}),(0,r.jsx)("span",{className:"text-sm",children:"Loading games..."})]})}):y.length>0?(0,r.jsx)("div",{className:"divide-y divide-slate-700/30",children:y.filter(e=>"in_progress"===e.status).slice(0,2).map(e=>(0,r.jsx)(k,{game:e},e.id))}):(0,r.jsxs)("div",{className:"bg-slate-800/30 p-6 flex flex-col items-center justify-center text-center",children:[(0,r.jsx)("div",{className:"bg-amber-500/10 rounded-full p-3 mb-3",children:(0,r.jsx)(m.A,{className:"h-6 w-6 text-amber-400"})}),(0,r.jsx)("p",{className:"text-sm font-medium text-slate-300",children:"No active games"}),(0,r.jsx)("p",{className:"text-xs text-slate-400 mt-1 mb-4",children:"Create a new game or join an existing one"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l(),{href:"/create-game",className:"no-underline",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white text-xs font-medium px-3 py-1.5 rounded-md transition-all duration-300 flex items-center gap-1",children:[(0,r.jsx)(p,{className:"h-3.5 w-3.5"}),"Create Game"]})}),(0,r.jsx)(l(),{href:"/join-game",className:"no-underline",children:(0,r.jsxs)("div",{className:"bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 text-xs font-medium px-3 py-1.5 rounded-md transition-all duration-300 flex items-center gap-1",children:[(0,r.jsx)(g.A,{className:"h-3.5 w-3.5"}),"Join Game"]})})]})]})})]})]})})}},1154:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1293:(e,t,s)=>{"use strict";s.d(t,{H4:()=>N,_V:()=>j,bL:()=>y});var r=s(2115),a=s(6081),n=s(9033),l=globalThis?.document?r.useLayoutEffect:()=>{};s(7650);var i=s(9708),o=s(5155),d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let s=r.forwardRef((e,s)=>{let{asChild:r,...a}=e,n=r?i.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(n,{...a,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),c="Avatar",[u,m]=(0,a.A)(c),[x,h]=u(c),f=r.forwardRef((e,t)=>{let{__scopeAvatar:s,...a}=e,[n,l]=r.useState("idle");return(0,o.jsx)(x,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,o.jsx)(d.span,{...a,ref:t})})});f.displayName=c;var p="AvatarImage",g=r.forwardRef((e,t)=>{let{__scopeAvatar:s,src:a,onLoadingStatusChange:i=()=>{},...c}=e,u=h(p,s),m=function(e,t){let[s,a]=r.useState("idle");return l(()=>{if(!e){a("error");return}let s=!0,r=new window.Image,n=e=>()=>{s&&a(e)};return a("loading"),r.onload=n("loaded"),r.onerror=n("error"),r.src=e,t&&(r.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(a,c.referrerPolicy),x=(0,n.c)(e=>{i(e),u.onImageLoadingStatusChange(e)});return l(()=>{"idle"!==m&&x(m)},[m,x]),"loaded"===m?(0,o.jsx)(d.img,{...c,ref:t,src:a}):null});g.displayName=p;var v="AvatarFallback",b=r.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:a,...n}=e,l=h(v,s),[i,c]=r.useState(void 0===a);return r.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(e)}},[a]),i&&"loaded"!==l.imageLoadingStatus?(0,o.jsx)(d.span,{...n,ref:t}):null});b.displayName=v;var y=f,j=g,N=b},2657:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(2115);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n,m:()=>l});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}function l(e){let t=Math.floor((Date.now()-e)/1e3);if(t<60)return"".concat(t," second").concat(1===t?"":"s");let s=Math.floor(t/60);if(s<60)return"".concat(s," minute").concat(1===s?"":"s");let r=Math.floor(s/60);if(r<24)return"".concat(r," hour").concat(1===r?"":"s");let a=Math.floor(r/24);return"".concat(a," day").concat(1===a?"":"s")}},4835:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4861:(e,t,s)=>{"use strict";s.d(t,{A:()=>m,AuthProvider:()=>u});var r=s(5155),a=s(2115);let n=(0,a.createContext)(void 0),l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=new Date;r.setTime(r.getTime()+864e5*s),document.cookie="".concat(e,"=").concat(t,";expires=").concat(r.toUTCString(),";path=/")},i=e=>{let t=e+"=",s=document.cookie.split(";");for(let e=0;e<s.length;e++){let r=s[e];for(;" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},o=e=>{document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")},d=async(e,t)=>{try{await fetch("/api/players/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:t,name:e,joinedAt:Date.now(),isOnline:!0})})}catch(e){console.error("Failed to register player:",e)}},c=async(e,t)=>{try{await fetch("/api/players/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:e,isOnline:t,lastSeen:Date.now()})})}catch(e){console.error("Failed to update player status:",e)}};function u(e){let{children:t}=e,[s,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=i("guestUser"),t=localStorage.getItem("guestUser"),s=null;if(e)try{s=JSON.parse(e)}catch(e){console.error("Error parsing cookie user:",e)}else if(t)try{s=JSON.parse(t),l("guestUser",t),localStorage.removeItem("guestUser")}catch(e){console.error("Error parsing localStorage user:",e)}if(s&&s.name){u(s);let e=i("lastRegistration"),t=Date.now();(!e||t-parseInt(e)>3e5)&&(d(s.name,s.id),l("lastRegistration",t.toString()))}x(!1)},[]),(0,a.useEffect)(()=>{if(!s)return;let e=0,t=()=>{let e=!document.hidden;c(s.id,e)},r=()=>{c(s.id,!1)};document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",r);let a=setInterval(()=>{if(!document.hidden){let t=Date.now();t-e>=3e4&&(e=t,c(s.id,!0))}},12e4);return()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",r),clearInterval(a)}},[s]),(0,r.jsx)(n.Provider,{value:{user:s,loading:m,signInAsGuest:e=>{let t={id:Math.random().toString(36).substr(2,9),name:e.trim(),email:"guest@aspade.online",isGuest:!0};u(t);let s=JSON.stringify(t);l("guestUser",s),localStorage.setItem("guestUser",s),d(t.name,t.id)},signOut:()=>{s&&c(s.id,!1),u(null),o("guestUser"),localStorage.removeItem("guestUser")}},children:t})}function m(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5690:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6081:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,q:()=>n});var r=s(2115),a=s(5155);function n(e,t){let s=r.createContext(t),n=e=>{let{children:t,...n}=e,l=r.useMemo(()=>n,Object.values(n));return(0,a.jsx)(s.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(a){let n=r.useContext(s);if(n)return n;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function l(e,t=[]){let s=[],n=()=>{let t=s.map(e=>r.createContext(e));return function(s){let a=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return n.scopeName=e,[function(t,n){let l=r.createContext(n),i=s.length;s=[...s,n];let o=t=>{let{scope:s,children:n,...o}=t,d=s?.[e]?.[i]||l,c=r.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(s,a){let o=a?.[e]?.[i]||l,d=r.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:r})=>{let a=s(e)[`__scope${r}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(n,...t)]}},6193:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Spade",[["path",{d:"M5 9c-1.5 1.5-3 3.2-3 5.5A5.5 5.5 0 0 0 7.5 20c1.8 0 3-.5 4.5-2 1.5 1.5 2.7 2 4.5 2a5.5 5.5 0 0 0 5.5-5.5c0-2.3-1.5-4-3-5.5l-7-7-7 7Z",key:"40bo9n"}],["path",{d:"M12 18v4",key:"jadmvz"}]])},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>o});var r=s(5155),a=s(2115),n=s(9708),l=s(2085),i=s(3999);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:t,suppressHydrationWarning:!0,...c})});d.displayName="Button"},7580:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7646:(e,t,s)=>{Promise.resolve().then(s.bind(s,423))},7951:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},8145:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var r=s(5155);s(2115);var a=s(2085),n=s(3999);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),suppressHydrationWarning:!0,...a})}},8186:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var r=s(5155),a=s(2115),n=s(3999);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),suppressHydrationWarning:!0,...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),suppressHydrationWarning:!0,...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),suppressHydrationWarning:!0,...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),suppressHydrationWarning:!0,...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),suppressHydrationWarning:!0,...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),suppressHydrationWarning:!0,...a})});u.displayName="CardFooter"},9033:(e,t,s)=>{"use strict";s.d(t,{c:()=>a});var r=s(2115);function a(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}},9663:(e,t,s)=>{"use strict";s.d(t,{BK:()=>o,eu:()=>i,q5:()=>d});var r=s(5155),a=s(2115),n=s(1293),l=s(3999);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});i.displayName=n.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...a})});o.displayName=n._V.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});d.displayName=n.H4.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[455,874,441,684,358],()=>t(7646)),_N_E=e.O()}]);